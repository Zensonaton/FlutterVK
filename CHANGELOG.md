<!-- markdownlint-disable MD033 -->

# Flutter VK vTODO

## Изменения

- Теперь долгое нажатие на название трека в мини-плеере открывает плейлист с выбранным треком.
- Использование больше оптимизированной операции сравнения классов между друг-другом.
- Удаление обложек трека после удаления кэшированного трека.
- Временно избавился от функционала по добавлению трека в очередь.
- Отображение ошибки в случае проблемы добавления нового трека аудио микса.
- Использование SnackBar'а для отображения ошибок получения обновлений вместо полноэкранного диалога.

## Фиксы

- Фикс отображения "маленьких" плейлистов из раздела "VK Mix" в разделе "Плейлисты для Вас".
- Фикс повторного запуска аудио-микс плейлиста (VK Mix).
- Фикс отображения полноэкранного плеера при отсутвующего последующего трека в плейлисте.
- Фикс загрузки обложек треков с Deezer после сброса БД.
- Фикс изменение обложки в медиа-уведомлении Android после изменения или загрузки обложки с Deezer.

<!-- Изменения с других Pre-release версий, которые должны быть отображены в non-pre версии: -->

<!--
- ⚡️ Кэширование списка треков и плейлистов. Данный функционал находится под большим сомнением в плане стабильности.
- Реализация оффлайн режима.
- Функционал загрузки текста песен со Spotify. В моей библиотеке из 460 треков, данная настройка сумела загрузить около 250 текстов песен, т.е., ~55%!
- Функционал загрузки обложек при помощи Deezer. Если приложение видит, что у трека нет обложки, то включённая настройка позволит ему найти обложку для трека через сервис Deezer. К примеру, в моей библиотеке из 460 треков, включённая настройка сумела увеличить количество обложек на ~60%.
- Настройка для использования более точного алгоритма получения цветов плеера.
- Реализация раздела "В реальном времени", который содержит в себе VK Mix, а так же мини-плейлисты "Какой сейчас вайб?".
- Реализация "VK Mix".
- Реализация плейлистов "Какой сейчас вайб?".
- Функционал для замены обложки трека.
- Кнопка для очистки локальной базы данных треков.
- Нажатие на изображение трека в полноэкранном плеере теперь делает изображение большим.
- Использование `Audio.mediaKey` для как ключ для хранения кэша изображений альбомов.
- Избавление от полей `memCachedX` для улучшения качества изображений.
- Нажатие на медиа уведомление теперь теперь открывает полноэкранный плеер.
- Реализация кнопки "экспорт списка треков" на экране профиля.
- Анимация для появления/исчезновения FAB'а.
- Использование других кнопок для "главного" действия в диалогах.
- Изменение примерного размера кэша треков.
- Совершенно новый, красивый и прекрасный экран профиля.
- Изменение горизонтального расстояния у полоски прогресса миниплеера на мобильном интерфейсе.
- Избавление от FAB'а на экране плейлиста, если плеер запущен.
- Удаление файла установщика после обновления приложения.
- Эффект прозрачности снизу для блока текста песни.
- Небольшое расстояние по бокам для блока текста песни.
- Опция для включения OLED-темы, которая помогает сохранить заряд батареи на OLED-экранах.
- Настройка для автоматической остановки плеера после паузы на долгое время. По-умолчанию, эта настройка включена, и приложение останавливает работу плеера спустя 10 минут неактивности.
- Кнопка "Поделиться файлом логов".
- Изображения треков теперь находятся в отдельной папке.
- Использование другого изображения при авторизации.
- Зажатие кнопки <kbd>Left Shift</kbd> перед открытием полноэкранного плеера не открывает его на весь экран на Windows.
- Логирование информации о версии приложения при запуске.
- Диалог с предупреждением о примерном размере плейлиста в мегабайтах/гигабайтах перед запуском кэширования.
- Возможность для отмены кэширования без удаления треков.
- Большая кнопка в правом нижнем углу на экране плейлистов на мобильном интерфейсе, позволяющая управлять воспроизведением треков в плейлисте.
- Кнопка для кэширования отдельного трека.
- Сохранение информации о кэшированности трека в БД после прослушивания.
- Анимация загрузки при кэшировании треков.
- Удаление кнопки "установить обложку" за ненадобностью.
- Удаление старой папки `tracks`, которая использовалась для старой реализации системы кэширования, и сейчас она не используется. Данное изменение не затронет кэш существующих треков.

- Фикс работы OLED темы при светлой теме.
- Фикс работы плеера при запуске приложения.
- Фикс невозможности получить lyrics текстов песен из-за кэша в БД.
- Фикс глючной кнопки паузы/воспроизведения во время загрузки трека.
- Фикс отсутствия обложек после подключения рекомендаций.
- Фикс медиа уведомления на Android при остановке воспроизведения.
- Фикс запуска кэширования фаворитных треков в случае, если пользователь не включал кэширование.
- Фикс того, что Android удалял обложки треков без ведома пользователя.
- Фикс постоянного получения рекомендаций при переходе на главный экран.
- Фикс сортировки плейлистов для разделов "Плейлисты для Вас" и "Совпадения по вкусам".
- Фикс редкого бага, из-за которого цвета панели навигации ломались.
- Фикс "вылезающего" текста у названий плейлистов (*overflow*) у некоторых плейлистов.
- Фикс мигания обложки на полноэкранном мобильном плеере, если обложка одинакова.
- Фикс автоматического запуска загрузки сторонних плейлистов, если в них включено кэширование.
- Фикс того, что плейлисты имеют разные изображения в кэше.
- Фикс отображения изображений у сторонних плейлистов.
- Фикс авторизации у некоторых пользователей.
- Фикс установщика для Windows.
- Фикс кэширования текстов песен.
- Фикс запуска кэширования плейлиста "лайкнутые треки" после восстановления интернет соединения.
- Фикс добавления новых лайкнутых треков.
- Фикс авторизации Spotify на мобильной версии.
- Фикс работы VK Mix на Android.
- Фикс отсутствующего Skeleton Loader'а для раздела VK Mix.
- Фикс не меняющегося текста песни при переключении трека мобильного интерфейса.
- Фикс "смещения" текстов песен у некоторых треков.
- Фикс "фейковых" плейлистов после выхода из аккаунта.
-->
